<div *ngIf="loading" style="display: flex; justify-content: center; padding: 24px;">
  <mat-spinner></mat-spinner>
</div>

<div *ngIf="!loading && errorMessage" style="color:#b00020; margin: 12px 0;">
  {{ errorMessage }}
</div>

<mat-card *ngIf="!loading && event">
  <mat-card-title>{{ event.title }}</mat-card-title>
  <mat-card-content>
    <div *ngIf="event.location">{{ event.location }}</div>
    <div *ngIf="event.startAt">{{ event.startAt }}</div>
    <div *ngIf="event.description" style="margin-top: 10px;">{{ event.description }}</div>
  </mat-card-content>

  <mat-card-actions>
    <ng-container *ngIf="auth.isLoggedIn(); else loginHint">
      <button
        mat-flat-button
        color="primary"
        (click)="register()"
        [disabled]="regLoading || !!myReg"
        *ngIf="!myReg"
      >
        Register
      </button>

      <button
        mat-stroked-button
        color="warn"
        (click)="cancel()"
        [disabled]="regLoading"
        *ngIf="myReg"
      >
        Cancel registration
      </button>

      <span *ngIf="myReg?.status === 'WAITLIST'" style="margin-left: 12px;">
        You are on the waitlist.
      </span>
    </ng-container>

    <ng-template #loginHint>
      <a mat-button routerLink="/login">Login to register</a>
    </ng-template>
  </mat-card-actions>
</mat-card>
